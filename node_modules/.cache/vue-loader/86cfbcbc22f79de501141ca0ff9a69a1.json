{"remainingRequest":"C:\\Users\\阿华\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\阿华\\Music\\Desktop\\13. 拼图小游戏\\vue\\Puzzle.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\阿华\\Music\\Desktop\\13. 拼图小游戏\\vue\\Puzzle.vue","mtime":1574000525764},{"path":"C:\\Users\\阿华\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\阿华\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\阿华\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIHByb3BzOiB7DQogICAgd2lkdGg6IHsNCiAgICAgIHR5cGU6IE51bWJlciwNCiAgICAgIGRlZmF1bHQ6IDUwMA0KICAgIH0sDQogICAgaGVpZ2h0OiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICBkZWZhdWx0OiA1MDANCiAgICB9LA0KICAgIHJvdzogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgZGVmYXVsdDogMw0KICAgIH0sDQogICAgY29sOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICBkZWZhdWx0OiAzDQogICAgfSwNCiAgICBpbWc6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIHJlcXVpcmVkOiB0cnVlDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGJsb2NrV2lkdGggKCkgew0KICAgICAgcmV0dXJuIHRoaXMud2lkdGggLyB0aGlzLmNvbDsNCiAgICB9LA0KICAgIGJsb2NrSGVpZ2h0ICgpIHsNCiAgICAgIHJldHVybiB0aGlzLmhlaWdodCAvIHRoaXMucm93Ow0KICAgIH0sDQogICAgY29ycmVjdFBvaW50cyAoKSB7DQogICAgICBjb25zdCB7IHJvdywgY29sLCBibG9ja1dpZHRoLCBibG9ja0hlaWdodCB9ID0gdGhpczsNCiAgICAgIGNvbnN0IGFyciA9IFtdOw0KDQogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcm93OyBpICsrKSB7DQogICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCByb3c7IGogKyspIHsNCiAgICAgICAgICBhcnIucHVzaCh7DQogICAgICAgICAgICB4OiBqICogYmxvY2tXaWR0aCwNCiAgICAgICAgICAgIHk6IGkgKiBibG9ja0hlaWdodCwNCiAgICAgICAgICAgIGlkOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIE1hdGgucmFuZG9tKCkgKiAxMDANCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gYXJyOw0KICAgIH0sDQogICAgYmxvY2tQb2ludHMgKCkgew0KICAgICAgY29uc3QgcG9pbnRzID0gdGhpcy5jb3JyZWN0UG9pbnRzOw0KICAgICAgY29uc3QgbGVuZ3RoID0gcG9pbnRzLmxlbmd0aDsNCiAgICAgIGNvbnN0IGxhc3RFbGUgPSBwb2ludHNbbGVuZ3RoIC0gMV07DQogICAgICBjb25zdCBuZXdBcnIgPSBbLi4ucG9pbnRzXTsNCiAgICAgIG5ld0Fyci5sZW5ndGggPSBsZW5ndGggLSAxOw0KICAgICAgbmV3QXJyLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7DQogICAgICBuZXdBcnIucHVzaChsYXN0RWxlKTsNCiAgICAgIHJldHVybiBuZXdBcnI7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlQ2xpY2sgKGUpIHsNCiAgICAgIGNvbnN0IGJsb2NrRG9tID0gZS50YXJnZXQ7DQogICAgICBjb25zdCBlbXB0eURvbSA9IHRoaXMuJHJlZnMuZW1wdHlbMF07DQogICAgICBpZighdGhpcy5pc0FkamFjZW50KGJsb2NrRG9tLCBlbXB0eURvbSkpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgY29uc3QgeyBsZWZ0LCB0b3AgfSA9IGJsb2NrRG9tLnN0eWxlOw0KICAgICAgYmxvY2tEb20uc3R5bGUubGVmdCA9IGVtcHR5RG9tLnN0eWxlLmxlZnQ7DQogICAgICBibG9ja0RvbS5zdHlsZS50b3AgPSBlbXB0eURvbS5zdHlsZS50b3A7DQogICAgICBlbXB0eURvbS5zdHlsZS5sZWZ0ID0gbGVmdDsNCiAgICAgIGVtcHR5RG9tLnN0eWxlLnRvcCA9IHRvcDsNCiAgICAgIGNvbnN0IHdpbkZsYWcgPSB0aGlzLmNoZWNrV2luKCk7DQogICAgICBpZih3aW5GbGFnKSB7DQogICAgICAgIHRoaXMud2luR2FtZShlbXB0eURvbSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGlzQWRqYWNlbnQgKGJsb2NrRG9tLCBlbXB0eURvbSkgew0KICAgICAgY29uc3QgeyBsZWZ0OmRvbUxlZnQsIHRvcDpkb21Ub3AsIHdpZHRoLCBoZWlnaHQgfSA9IGJsb2NrRG9tLnN0eWxlOw0KICAgICAgY29uc3QgeyBsZWZ0OmVtcHR5TGVmdCwgdG9wOmVtcHR5VG9wIH0gPSBlbXB0eURvbS5zdHlsZTsNCiAgICAgIGNvbnN0IHhEaXMgPSBNYXRoLmZsb29yKE1hdGguYWJzKHBhcnNlRmxvYXQoZG9tTGVmdCkgLSBwYXJzZUZsb2F0KGVtcHR5TGVmdCkpKTsNCiAgICAgIGNvbnN0IHlEaXMgPSBNYXRoLmZsb29yKE1hdGguYWJzKHBhcnNlRmxvYXQoZG9tVG9wKSAtIHBhcnNlRmxvYXQoZW1wdHlUb3ApKSk7DQogICAgICBjb25zdCBmbGFnID0gKGRvbUxlZnQgPT09IGVtcHR5TGVmdCAmJiB5RGlzID09PSBwYXJzZUludChoZWlnaHQpKSANCiAgICAgICAgICAgICAgICB8fCAoZG9tVG9wID09PSBlbXB0eVRvcCAmJiB4RGlzID09PSBwYXJzZUludCh3aWR0aCkpOw0KICAgICAgcmV0dXJuIGZsYWc7DQogICAgfSwNCiAgICBjaGVja1dpbiAoKSB7DQogICAgICBjb25zdCBibG9ja0RvbUFyciA9IHRoaXMuJHJlZnMuYmxvY2s7DQogICAgICByZXR1cm4gYmxvY2tEb21BcnIuZXZlcnkoZG9tID0+IHsNCiAgICAgICAgY29uc3QgeyBsZWZ0OmRvbUxlZnQsIHRvcDpkb21Ub3AgfSA9IGRvbS5zdHlsZTsNCiAgICAgICAgY29uc3QgeyBjb3JyZWN0eDpjb3JyZWN0WCwgY29ycmVjdHk6Y29ycmVjdFkgfSA9IGRvbS5kYXRhc2V0Ow0KICAgICAgICBjb25zdCBmbGFnID0gcGFyc2VJbnQoZG9tTGVmdCkgPT09IHBhcnNlSW50KGNvcnJlY3RYKSAmJiBwYXJzZUludChkb21Ub3ApID09PSBwYXJzZUludChjb3JyZWN0WSk7DQogICAgICAgIHJldHVybiBmbGFnOw0KICAgICAgfSkNCiAgICB9LA0KICAgIHdpbkdhbWUgKGVtcHR5RG9tKSB7DQogICAgICBzZXRUaW1lb3V0KCgpPT57DQogICAgICAgIGFsZXJ0KCdtb25pY2EgNjAhISEnKTsNCiAgICAgICAgZW1wdHlEb20uc3R5bGUub3BhY2l0eSA9IDE7DQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgIHRoaXMuZ29Ub05leHRMZXZlbCgpOyAgIA0KICAgICAgICB9LCAzMDApDQogICAgICB9LCAzMDApDQogICAgfSwNCiAgICBnb1RvTmV4dExldmVsICgpIHsNCiAgICAgIGNvbnN0IGFuc3dlckZsYWcgPSB3aW5kb3cuY29uZmlybSgn6KaB546p5LiL5LiA5YWz5ZCX77yfJyk7DQogICAgICBpZihhbnN3ZXJGbGFnKSB7DQogICAgICAgIHRoaXMuJGVtaXQoJ25leHQnKTsNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["Puzzle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Puzzle.vue","sourceRoot":".","sourcesContent":["<template>\r\n  <div class=\"puzzle\" :style=\"{width: width+'px', height: height+'px'}\">\r\n    <div \r\n      class=\"puzzle__block\"\r\n      v-for=\"(item, index) in blockPoints\"\r\n      :key=\"item.id\"\r\n      :style=\"{\r\n        width: blockWidth+'px',\r\n        height: blockHeight+'px',\r\n        left: item.x+'px',\r\n        top: item.y+'px',\r\n        backgroundImage: `url(${img})`,\r\n        backgroundPosition: `-${correctPoints[index].x}px -${correctPoints[index].y}px`,\r\n        opacity: index === blockPoints.length - 1 && 0\r\n      }\"\r\n      @click=\"handleClick\"\r\n      :ref=\"index === blockPoints.length - 1 ? 'empty' : 'block'\"\r\n      :data-correctX=\"correctPoints[index].x\"\r\n      :data-correctY=\"correctPoints[index].y\"\r\n    />\r\n    <!-- <div style=\"margin-left:650px\">\r\n      <img style=\"width:200px\" src=\"./public/puzzleImg/monica1.jpg\" alt=\"\">\r\n      <span style=\"color:blue\">第一张提示图</span>\r\n    </div> -->\r\n  </div>\r\n  \r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    width: {\r\n      type: Number,\r\n      default: 500\r\n    },\r\n    height: {\r\n      type: Number,\r\n      default: 500\r\n    },\r\n    row: {\r\n      type: Number,\r\n      default: 3\r\n    },\r\n    col: {\r\n      type: Number,\r\n      default: 3\r\n    },\r\n    img: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  computed: {\r\n    blockWidth () {\r\n      return this.width / this.col;\r\n    },\r\n    blockHeight () {\r\n      return this.height / this.row;\r\n    },\r\n    correctPoints () {\r\n      const { row, col, blockWidth, blockHeight } = this;\r\n      const arr = [];\r\n\r\n      for(let i = 0; i < row; i ++) {\r\n        for(let j = 0; j < row; j ++) {\r\n          arr.push({\r\n            x: j * blockWidth,\r\n            y: i * blockHeight,\r\n            id: new Date().getTime() + Math.random() * 100\r\n          })\r\n        }\r\n      }\r\n      return arr;\r\n    },\r\n    blockPoints () {\r\n      const points = this.correctPoints;\r\n      const length = points.length;\r\n      const lastEle = points[length - 1];\r\n      const newArr = [...points];\r\n      newArr.length = length - 1;\r\n      newArr.sort(() => Math.random() - 0.5);\r\n      newArr.push(lastEle);\r\n      return newArr;\r\n    }\r\n  },\r\n  methods: {\r\n    handleClick (e) {\r\n      const blockDom = e.target;\r\n      const emptyDom = this.$refs.empty[0];\r\n      if(!this.isAdjacent(blockDom, emptyDom)) {\r\n        return;\r\n      }\r\n      const { left, top } = blockDom.style;\r\n      blockDom.style.left = emptyDom.style.left;\r\n      blockDom.style.top = emptyDom.style.top;\r\n      emptyDom.style.left = left;\r\n      emptyDom.style.top = top;\r\n      const winFlag = this.checkWin();\r\n      if(winFlag) {\r\n        this.winGame(emptyDom)\r\n      }\r\n    },\r\n    isAdjacent (blockDom, emptyDom) {\r\n      const { left:domLeft, top:domTop, width, height } = blockDom.style;\r\n      const { left:emptyLeft, top:emptyTop } = emptyDom.style;\r\n      const xDis = Math.floor(Math.abs(parseFloat(domLeft) - parseFloat(emptyLeft)));\r\n      const yDis = Math.floor(Math.abs(parseFloat(domTop) - parseFloat(emptyTop)));\r\n      const flag = (domLeft === emptyLeft && yDis === parseInt(height)) \r\n                || (domTop === emptyTop && xDis === parseInt(width));\r\n      return flag;\r\n    },\r\n    checkWin () {\r\n      const blockDomArr = this.$refs.block;\r\n      return blockDomArr.every(dom => {\r\n        const { left:domLeft, top:domTop } = dom.style;\r\n        const { correctx:correctX, correcty:correctY } = dom.dataset;\r\n        const flag = parseInt(domLeft) === parseInt(correctX) && parseInt(domTop) === parseInt(correctY);\r\n        return flag;\r\n      })\r\n    },\r\n    winGame (emptyDom) {\r\n      setTimeout(()=>{\r\n        alert('monica 60!!!');\r\n        emptyDom.style.opacity = 1;\r\n        setTimeout(() => {\r\n          this.goToNextLevel();   \r\n        }, 300)\r\n      }, 300)\r\n    },\r\n    goToNextLevel () {\r\n      const answerFlag = window.confirm('要玩下一关吗？');\r\n      if(answerFlag) {\r\n        this.$emit('next');\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.puzzle {\r\n  position: relative;\r\n  border: 2px solid #ccc;\r\n  \r\n}\r\n.puzzle__block {\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  border: 1px solid #fff;\r\n  transition: all .3s;\r\n}\r\n</style>\r\n\r\n"]}]}